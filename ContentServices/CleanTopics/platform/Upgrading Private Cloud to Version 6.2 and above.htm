<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head />
    <body>The following steps describe how to upgrade Platform Private Cloud to Version 6.2 and above: Stop Tomcat. Stop Database. Make a copy of your existing Platform config, storage and rollbase\personalize folders. Make a copy of your existing third-party jars, E.g. mysql-connect.jar If you have any custom files, such as FusionCharts, in the webapps folder of your Tomcat instance, copy these to a folder for later use. Using installer If you installed using the Platform installer, run uninstall. You can launch it from the Rollbase\uninstall folder. Make sure all previous version folders are deleted. If not, delete manually. Install 6.2 or above using the installer. Using your own External Tomcat Keep third-party jars (e.g. mysql-connect.jar) and tomcat jars in Tomcat lib. Remove all other (Platform) jars. Delete the following folders from the webapps folder: master, router, prod1, search, storage, rest, webapi Extract lib.zip to &lt;ROLLBASE_HOME&gt;/lib folder. It contains all Platform jars. If you already have lib folder, delete entire folder and extract again. Extract rollbase.zip to &lt;ROLLBASE_HOME&gt; Extract webapps.zip to Tomcat’s webapps folder. Modify Tomcat’s Catalina.properties file and replace the following line to include Rollbase/lib jars. File is available at &lt;TOMCAT_HOME&gt;/conf/catalina.properties common.loader="${catalina.base}/lib","${catalina.base}/lib/*.jar","${catalina.base}/rollbase/lib","${catalina.base}/rollbase/lib/*.jar",
"${catalina.home}/lib","${catalina.home}/lib/*.jar","${catalina.home}/rollbase/lib","${catalina.home}/rollbase/lib/*.jar" Copy all the backed up third-party jars to Tomcat’s lib folder from this path &lt;TOMCAT_HOME&gt;/lib. Copy all the files from the backed up config folder to &lt;ROLLBASE_HOME&gt;/config folder. Do not copy paste the entire config folder. Note: Make sure that the WidgetDefinitions directory and widgetIndexes.json file are existing in the config folder, else the same can be copied from rollbase.zip's config folder. (Applicable only for 6.0 and above versions only) Note: In Platform 6.2, in the cluster-config.xml, master-cluster-config.xml, and prod-cluster-config.xml files of the config folder, the &lt;group&gt;…&lt;/group&gt; node must be replaced by &lt;cluster-name&gt;…&lt;/cluster-name&gt;. For instance, replace the following: &lt;group&gt; &lt;name&gt;rb_global&lt;/name&gt; &lt;password&gt;rb_global&lt;/password&gt; &lt;/group&gt; With the following: &lt;cluster-name&gt;rb_global&lt;/cluster-name&gt; In the cluster-config.xml file of the config folder, remove the following attribute from the &lt;replicatedmap&gt;… &lt;/replicatedmap&gt; node: &lt;replication-delay-millis&gt;0&lt;/replication-delay-millis&gt; If you are using JDK 9 or above, then add the following commands to your Java arguments in your tomcat/bin/setenv. Copy java --add-modules java.se \ --add-exports java.base/jdk.internal.ref=ALL-UNNAMED \ --add-opens java.base/java.lang=ALL-UNNAMED \ --add-opens java.base/java.nio=ALL-UNNAMED \ --add-opens java.base/sun.nio.ch=ALL-UNNAMED \ --add-opens java.management/sun.management=ALL-UNNAMED \ --add-opens jdk.management/com.ibm.lang.management.internal=ALL-UNNAMED \ --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED For instance, the following commands have been added in the setenv.bat file. set JAVA_OPTS=%JAVA_OPTS% --add-modules java.se --add-exports java.base/jdk.internal.ref=ALL-UNNAMED set JAVA_OPTS=%JAVA_OPTS% --add-opens java.base/java.nio=ALL-UNNAMED --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED set JAVA_OPTS=%JAVA_OPTS% --add-opens java.base/sun.nio.ch=ALL-UNNAMED --add-opens java.management/sun.management=ALL-UNNAMED For more information, see Running in Modular Java. Note: If you are upgrading to Platform 6.3 and using GraalJS as a runtime to execute JavaScripts to improve performance, add the following commands to the setenv.bat file. set "JAVA_OPTS=%JAVA_OPTS% -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+UseJVMCICompiler --module-path=%CATALINA_HOME%/rollbase/lib/graal-sdk-21.1.0.jar;%CATALINA_HOME%/rollbase/lib/truffle-api-21.1.0.jar --upgrade-module-path=%CATALINA_HOME%/rollbase/lib/graalvm_compiler/compiler-21.1.0.jar;%CATALINA_HOME%/rollbase/lib/graalvm_compiler/compiler-management-21.1.0.jar" For more information, see GraalVM&#160;JavaScript. Copy the storage folder to the new storage server node. Copy the personalize folder to &lt;ROLLBASE_HOME&gt;/personalize. If you saved any custom files from the webapps folder as described in Step 5 , copy them into the new installation. While upgrading to Platform 6.2, ensure that you remove outdated third-party JAR files that have been replaced. Remove the following JAR files: hazelcast-all-3.12.12.jar (replaced with hazelcast-all-4.2.1.jar) elasticsearch-rest-client-6.5.0.jar (replaced with elasticsearch-rest-client-7.14.0.jar) icu4j-67_1.jar (replaced with icu4j-69.1.jar) jackson-core-asl-1.9.5.jar jackson-mapper-asl-1.9.5.jar In the Rollbase\sql folder, find the appropriate script(s) to update your database. If you are upgrading from a version other than the previous release, you will need to use multiple scripts, starting with the next version higher than your existing installation and continuing until you reach the current script. Open the sql script(s), and do the following: Uncomment the section for your database type. Verify that the sections for other database types are commented out. Execute the updated sql files. Start the Tomcat. After you have upgraded your Private Cloud, follow the steps as described in re-index customer tenants .</body>
</html>